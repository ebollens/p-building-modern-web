<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Building for the Modern Web</title>

		<meta name="description" content="">
		<meta name="author" content="Eric R. Bollens">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/cloudcompli.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
                
            <header>
                <img src="img/cloudcompli-logo.png">
            </header>

            <footer>
                <a href="http://eb.io/ghp/p-building-modern-web" target="_blank">eb.io/ghp/p-building-modern-web</a>
            </footer>

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h3 style="margin: 0;">Building for the</h3>
					<h1 style="margin: 0;">Modern Web</h1>
					<h3 style="margin: 0;">with RWD &amp; Web Components</h3>
					<p>
						<small>Eric Bollens / <a href="mailto:eric@eb.io">eric@eb.io</a> / <a href="http://github.com/ebollens">ebollens [GitHub]</a> / <a href="http://twitter.com/ericbollens">@ericbollens [Twitter]</a></small>
					</p>
				</section>
                
                <section>
                    
                    <section>
                        <h2>Before We Start...</h2>
                    </section>
                    
                    <section>
                        <h2>About This Presentation</h2>
                        <p class='fragment'>
                            <strong>The slides from this presentation</strong>
                            <br><em><a href='http://eb.io/ghp/p-building-modern-web' target='_blank'>eb.io/ghp/p-building-modern-web</a></em>
                        </p>
                        <p class='fragment'>
                            <strong>This presentation is open source</strong>
                            <br><em><a href='https://github.com/ebollens/p-building-modern-web' target='_blank'>github.com/ebollens/p-building-modern-web</a></em>
                        </p>
                    </section>
                
                    <section>
                        <h2>About Me</h2>
                        <p class="fragment">
                            Chief Technology Officer
                            <br><img src="img/cloudcompli-logo.png" style="border:0;background:none;box-shadow:none;height:1em;">
                        </p>
                        <p class='fragment'>
                            Formerly,
                            Open Source Architect
                            <br><img src="img/ucla-logo.png" style="border:0;background:none;box-shadow:none;height:1em;">
                            <img src="img/oit-logo.png" style="border:0;background:none;box-shadow:none;height:1em;">
                        </p>
                        <p class='fragment'>Open source, modern web &amp; IoT evangelist</p>
                    </section>
                    
                </section>
                
                <section>
                    
                    <section>
                        <h2>What Is The Modern Web?</h2>
                        <p class="fragment"><strong>Expressive semantics</strong>
                            <br><em>Human and machine comprehensible</em>
                        </p>
                        <p class="fragment"><strong>Responsive to user needs</strong>
                            <br><em>Interfaces for a rich browsing ecosystem</em>
                        </p>
                        <p class="fragment"><strong>Rich interface components</strong>
                            <br><em>Reusable and extensible functionality</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>Expressive Semantics</h2>
                        <pre class='fragment'><code class='html'>&lt;body>
    &lt;header>&lt;!-- .. -->&lt;/header>
    &lt;main>
        &lt;article>
            &lt;header>&lt;!-- .. -->&lt;/header>
            &lt;footer>&lt;!-- .. -->&lt;/footer>
            &lt;main>&lt;!-- .. -->&lt;/main>
        &lt;/article>
    &lt;/main>
    &lt;footer>&lt;!-- .. -->&lt;/footer>
&lt;/body></code></pre>
                    </section>
                    
                    <section>
                        <h2>Responsive to user needs</h2>
                        <pre class='fragment'><code class='html'>&lt;div class="row">
  &lt;div class="col-xs-12 col-sm-6">
    &lt;!-- .. -->
  &lt;/div>
  &lt;div class="clearfix visible-xs-block">&lt;/div>
  &lt;div class="col-xs-6 col-sm-3">
    &lt;!-- .. -->
  &lt;/div>
  &lt;div class="col-xs-6 col-sm-3">
    &lt;!-- .. -->
  &lt;/div>
&lt;/div></code></pre>
                    </section>
                    
                    <section>
                        <h2>Rich interface components</h2>
                        <pre class='fragment'><code class='html'>&lt;ol is="responsive-gallery">
    &lt;li>
        &lt;figure is="youtube-video-popup" data-id="XXXXXXXXX">
            &lt;figcaption>&lt!-- .. -->&lt;/figcaption>
        &lt;/figure>
    &lt;/li>
    &lt;li>
        &lt;figure is="youtube-video-popup" data-id="XXXXXXXXX">
            &lt;figcaption>&lt!-- .. -->&lt;/figcaption>
        &lt;/figure>
    &lt;/li>
    &lt;!-- .. -->
&lt;/ol></code></pre>
                    </section>
                    
                </section>
                
                <section>

                    <section>
                        <h2>Responsive Design</h2>
                    </section>

                    <section>
                        <h2>The Web is Flexible</h2>
                        <p class='fragment'><em>The control which designers know in the print medium... is simply a function of the limitation of the printed page.</em></p>
                        <p class='fragment'><em>We should embrace the fact that the web doesn't have the same constraints, and <strong>design for this flexibility</strong>.</em></p>
                        <p class='fragment'><em style='color:#bbb'>~ John Allsopp, <a href='http://www.alistapart.com/articles/dao/' target='_blank'>A Dao of Web Design</a></em></p>
                    </section>

                    <section>
                        <h2>Why Do We Care?</h2>
                        <p class='fragment'>
                            First there was desktop...
                            <span class='fragment'><br>then there was mobile...</span>
                            <span class='fragment'><br>and now watches, widescreens, etc.</span>
                        </p>
						<p class='fragment'>Each device has different <strong>dimensions</strong> and <strong>capabilities</strong></p>
                        <p class='fragment'><strong>Fully-capable browsers</strong> have become pervasive</p>
                        <p class='fragment'>Changing perceptions regarding <strong>how mobile is used</strong></p>
                    </section>

				</section>
                
                <section>
                    
                    <section>
                        <h2>Responsive Layouts</h2>
                    </section>
                    
                    <section>
                        <table>
                            <tr>
                                <td class="fragment"><img src='img/responsive-marcotte-ex-1.png'></td>
                                <td class="fragment"><img src='img/responsive-marcotte-ex-2.png'></td>
                                <td class="fragment"><img src='img/responsive-marcotte-ex-3.png'></td>
                            </tr>
                        </table>
                    </section>
                    
                    <section>
                        <h2>Flexible Grid</h2>
                        <p class='fragment'><code>target ÷ context = result</code></p>
                        <table style="width:100%;">
                            <tr>
                                <td class='fragment'>
                                    <pre class="prettyprint"><code>body > header, 
body > footer, 
body > #container {
    width: 960px;
    margin: 0 auto;
}

#container > nav {
    float: left;
    width: 180px;
}

#container > main {
    margin-left: 190px;
    width: 770px;
}</code></pre>
                                </td>
                                <td class="fragment">
                                    <pre>body > header, body > footer, 
body > #container {
    <span class="fragment">width: 93.75%;  /* 960 ÷ 1024 = .9375 */</span>
    margin: 0 auto;
}

#container > nav {
    float: left;
    <span class="fragment">width: 18.75%;  /* 180 ÷ 960 = .1875 */</span>
}

#container > main {
    <span class="fragment">margin-left: 19.791667%; 
                    /* 190 ÷ 960 = .1979166.. */</span>
    <span class="fragment">width: 80.208333%; 
                    /* 770 ÷ 960 = .8020833.. */</span>
}</pre>
                                </td>
                            </tr>
                        </table>
                    </section>
                    
                    <section>
                        <h2>Breaking the Flexible Grid</h2>
                        <p class="fragment">Still has limits</p>
                        <p class="fragment"><em>Small screen
                            <br><strong>constricts content</strong></em></p>
                        <p class="fragment"><em>Large screen
                            <br><strong>isolates content</strong></em></p>
                    </section>
                    
                    <section>
                        <h2>Media Queries</h2>
                        <table style='width:100%'>
                            <tr>
                                <td class='fragment'><pre class="prettyprint"><code>body > header, 
body > footer, 
body > #container {
    width: 93.75%;
    margin: 0 auto;
}

#container > nav {
    float: left;
    width: 18.75%;
}

#container > main {
    margin-left: 19.791667%;
    width: 80.208333%;
}</code></pre></td>
                                <td class='fragment'><pre class='prettyprint'>@media (<span class='fragment'>max-width: 640px</span>){
    
    #container > nav {
        <span class='fragment'>float: none;</span>
        <span class='fragment'>width: 100%;</span>
    }
    
    #container > main {
        <span class='fragment'>margin-left: 0;</span>
        <span class='fragment'>width: 100%;</span>
    }
    
}</pre></td>
                            </tr>
                        </table>
                    </section>
                    
                    <section>
                        <h2>Flexible Media</h2>
                        <p class='fragment'>Images and video have explicit pixel sizes</p>
                        <table>
                            <tr>
                                <td class='fragment'><img src='img/responsive-opera-large-ex.png' style="height:250px"></td>
                                <td class='fragment'><img src='img/responsive-opera-small-overflow-ex.png' style="height:250px"></td>
                            </tr>
                        </table>
                        <pre class='fragment'><code class='css'>img { max-width: 100%; }</code></pre>
                        <pre class='fragment'><code class='css'>img, embed, object, video { max-width: 100%; }</code></pre>
                    </section>
                    
                    <section>
                        <h2>Viewport Tag</h2>
                        <p class='fragment'>Mobile browsers assume desktop pages
                            <br><span class='fragment'>but the viewport tag lets us specify otherwise</span></p>
                        <div class='fragment'><pre class='prettyprint'><code>&lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;</code></pre></div>
                    </section>
                    
                    <section>
                        <h2>Recap</h2>
                        <p class='fragment'><strong>Flexible Grid</strong>
                            <br><em class='fragment'>Proportional design with percentages, not pixels</em></p>
                        <p class='fragment'><strong>Media Queries</strong>
                            <br><em class='fragment'>Application of styles at particular dimensions</em></p>
                        <p class='fragment'><strong>Responsive Media</strong>
                            <br><em class='fragment'>Images and video that scale to fit their container</em></p>
                        <p class='fragment'><strong>Viewport Definition</strong>
                            <br><em class='fragment'>Specify dimensions for the viewport</em></p>
                    </section>
                    
                </section>
                
                <section>
                    
                    <section>
                        <h2>More Than Basic Responsive Layouts</h2>
                    </section>
                    
                    <section>
                        <h2>Media Queries</h2>
                        <p class="fragment"><strong>Most commonly...</strong></p>
                        <pre class="fragment"><code class="css">@media (max-width: 480px) { /* ... */ }</code></pre>
                        <p class="fragment"><strong>But often more effective...</strong></p>
                        <pre class="fragment"><code class="css">@media (min-width: 481px) { /* ... */ }</code></pre>
                        <p class="fragment"><strong>For high resolution displays...</strong></p>
                        <pre class="fragment"><code class="css">@media (min-resolution: 300dpi) { /* ... */ }</code></pre>
                    </section>
                    
                    <section>
                        <h2>And more Media Queries</h2>
						<pre class="fragment prettyprint">@media (max-width: 480px) { /* ... */ }
@media (min-width: 481px) { /* ... */ }
<span class="fragment">@media (max-resolution: 299dpi) { /* ... */ }
@media (min-resolution: 300dpi) { /* ... */ }</span>
<span class="fragment">@media (max-height: 800p1px) { /* ... */ }
@media (min-height: 800px) { /* ... */ }</span>
<span class="fragment">@media (max-aspect-ratio: 1/1) { /* ... */ }
@media (orientation: portrait) { /* ... */ }</span>
<span class="fragment">@media (min-aspect-ratio: 1/1) { /* ... */ }
@media (orientation: landscape) { /* ... */ }</span></pre>
						<pre class="fragment prettyprint">@media (light-level: normal) { /* ... */ }
@media (light-level: dim)  { /* ... */ }
@media (light-level: washed)  { /* ... */ }
@media (pointer: fine) { /* ... */ }
@media (hover: hover) { /* ... */ }
@media (scripting: enabled) { /* ... */ }</pre>
                    </section>
                    
                    <section>
                        <h2>@supports</h2>
                        <pre class="fragment"><code class="css">@supports (display: flex) {
  div { display: flex; }
}</code></pre>
                        <pre class="fragment"><code class="css">@supports (-webkit-box-shadow: 0 0 2px #000) or 
          (   -moz-box-shadow: 0 0 2px #000) or 
          (        box-shadow: 0 0 2px #000) { 
   div { /* .. */ } 
}</code></pre>
                        <pre class="fragment"><code class="javascript">CSS.supports("display", "flex");</code></pre>
                        <pre class="fragment"><code class="javascript">CSS.supports("(transform-origin: 5% 5%)");</code></pre>
                        <pre class="fragment"><code class="javascript">CSS.supports("(transform-origin: 5% 5%) and (display:flex)");</code></pre>
                        <p class="fragment"><em>All current browsers except IE<br><small>(polyfill: <a href="https://github.com/kjarmicki/fq-polyfill">github.com/kjarmicki/fq-polyfill</a>)</small></em></p>
                    </section>
                    
                    <section>
                        <h2>Using ems for Breakpoints</h2>
                        <pre class='fragment'><code class='css'>@media (min-width: 641px) { /* ... */ }</code></pre>
                        <p class='fragment'><em>for windows or screens of particular width ranges,
                            <br>we want to flow our content in a particular way</em></p>
                        <p class='fragment'>But is this the right approach?</p>
                        <p class='fragment'><strong>What happens when the baseline is not 14pt/16px?</strong></p>
                        <pre class='fragment'><code class='css'>@media (min-width: 40.0625em) { /* ... */ }</code></pre>
                        <p>
                            <em class='fragment'>Identical behavior for default text size</em>
                            <br>
                            <em class='fragment'>Friendly to assisted users who scale text size up</em>
                            <br>
                            <em class='fragment'>Support high density devices that report larger pixel sizes</em>
                        </p>
                    </section>
                    
                </section>
                
                <section>

					<section>
						<h2>Responsive Interactions</h2>
					</section>

                    <section>
                        <h2>How Do You Scroll?</h2>
                        <p class="fragment">Spin a scroll wheel</p>
                        <p class="fragment">Drag a scroll bar</p>
                        <p class="fragment">Press a scroll arrow</p>
                        <p class="fragment">Slide a finger across the screen</p>
                        <p class="fragment">Verbally state "scroll" and a direction</p>
                    </section>

                    <section>
                        <h2>How Do You Undo?</h2>
                        <p class="fragment"><code>CTRL + Z</code></p>
                        <p class="fragment"><code>CMD + Z</code></p>
                        <p class="fragment">Press down and select action</p>
                        <p class="fragment">Shake or swipe</p>
                    </section>

                    <section>
                        <h2>Handling for Many Environments</h2>
                        <pre class="fragment"><span class="fragment">document.addEventListener('keydown', function(e){
  <span class="fragment">if(navigator.userAgent.match(/Macintosh/g) && e.which === 90 && e.metaKey)
    doUndo();
  </span><span class="fragment">else if(e.which === 90 && e.ctrlKey)
    doUndo();</span>
});</span></pre>
                        <pre class="fragment">if(navigator.userAgent.match(/(iPad|iPhone|iPod)/g))
    <span class="fragment">window.addEventListener('shake', function(e){
        doUndo();
    });</span></pre>
                        <pre class="fragment" style="height:160px;">(function (window, document) {

    function Shake() {
        this.hasDeviceMotion = 'ondevicemotion' in window;
        this.threshold = 15;
        this.lastTime = new Date();
        this.lastX = null;
        this.lastY = null;
        this.lastZ = null;

        if (typeof document.CustomEvent === "function") {
            this.event = new document.CustomEvent('shake', {
                bubbles: true,
                cancelable: true
            });
        } else if (typeof document.createEvent === "function") {
            this.event = document.createEvent('Event');
            this.event.initEvent('shake', true, true);
        } else {
          return false;
        }
    }

    Shake.prototype.reset = function () {
        this.lastTime = new Date();
        this.lastX = null;
        this.lastY = null;
        this.lastZ = null;
    };

    Shake.prototype.start = function () {
        this.reset();
        if (this.hasDeviceMotion) { window.addEventListener('devicemotion', this, false); }
    };

    Shake.prototype.stop = function () {
        if (this.hasDeviceMotion) { window.removeEventListener('devicemotion', this, false); }
        this.reset();
    };

    Shake.prototype.devicemotion = function (e) {
        var current = e.accelerationIncludingGravity,
            currentTime,
            timeDifference,
            deltaX = 0,
            deltaY = 0,
            deltaZ = 0;

        if ((this.lastX === null) && (this.lastY === null) && (this.lastZ === null)) {
            this.lastX = current.x;
            this.lastY = current.y;
            this.lastZ = current.z;
            return;
        }

        deltaX = Math.abs(this.lastX - current.x);
        deltaY = Math.abs(this.lastY - current.y);
        deltaZ = Math.abs(this.lastZ - current.z);

        if (((deltaX > this.threshold) && (deltaY > this.threshold)) || ((deltaX > this.threshold) && (deltaZ > this.threshold)) || ((deltaY > this.threshold) && (deltaZ > this.threshold))) {
            //calculate time in milliseconds since last shake registered
            currentTime = new Date();
            timeDifference = currentTime.getTime() - this.lastTime.getTime();

            if (timeDifference > 1000) {
                window.dispatchEvent(this.event);
                this.lastTime = new Date();
            }
        }

        this.lastX = current.x;
        this.lastY = current.y;
        this.lastZ = current.z;
    };

    Shake.prototype.handleEvent = function (e) {
        if (typeof (this[e.type]) === 'function') {
            return this[e.type](e);
        }
    };

    var myShakeEvent = new Shake();
    myShakeEvent && myShakeEvent.start();

}(window, document));</pre>
                        <p class="fragment"><em>And how about tap highlight undo?</em></p>
                    </section>

                    <section>
                        <h2>IndieUI</h2>
                        <p class="fragment" style="color:#bbb;">Make it easier for web developers to author <strong style="color:#fff;">consistently usable interfaces that are input-agnostic</strong> and independent of a user's particular platform, hardware, locale &amp; preferences.</p>
                        <p class="fragment" style="color:#bbb;">Enable every type of control in these interfaces to be <strong style="color:#fff;">programmatically determinable and controllable by both mainstream and alternate forms of user input</strong>, including assistive technologies.</p>
                        <p class="fragment" style="color:#bbb;">Provide a clear path for web developers to <strong style="color:#fff;">transition from current physical events to IndieUI events</strong>, during the period when implementations of IndieUI are incomplete.</p>
                    </section>

                    <section>
                        <h2>UndoRequest</h2>
                        <pre class="fragment"><code class='javascript'>element.addEventListener('undorequest', function(){
    doUndo();
});</code></pre>
                        <p>
                            <em class='fragment'>No keypress detection</em>
                            <br>
                            <em class='fragment'>No UA sniffing or OS consideration</em>
                            <br>
                            <em class='fragment'>No complex hacks to detect interaction</em>
                            <br>
                            <em class='fragment'>No undetectable actions</em>
                        </p>
                    </section>

                    <section>
                        <h2>The Twist</h2>
                        <p class="fragment">Unfortunately, IndieUI is not really supported yet</p>
						<p class="fragment"><strong>For now, just be congnizant of the variety...</strong></p>
						<p>
							<em class="fragment">Not everyone has hover state</em>
							<br>
							<em class="fragment">Not everyone interacts with keypresses</em>
							<br>
							<em class="fragment">Mouse events and touch events are different</em>
						</p>
                    </section>

				</section>
                
                <section>
                    
                    <section>
                        <h2>Responsive to the Environment</h2>
                    </section>
                    
                    <section>
                        <h2>Ambient Light</h2>
                        <p class="fragment">Adapt to the luminosity of the environment</p>
                        <pre class="fragment prettyprint"><code class="css">@media (light-level: normal){ body { background-color: #ddd; color: #333; } }
@media (light-level: dim)   { body { background-color: #000; color: #ddd; } }</code></pre>
                        <p class="fragment">Change simulation or game conditions based on environment</p>
                        <pre class="fragment prettyprint"><code class="javascript">window.addEventListener('devicelight', function(e) {
  /** change environment based on e.value from [0,100] **/
});
</code></pre>
                        <p class="fragment">Even adjust for the health of your user</p>
                        <p>
                            <em class="fragment">Currently moving through the standards process</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>Battery Life</h2>
                        <p class="fragment"><strong>Battery Status API</strong></p>
                        <pre class="prettyprint fragment"><code class="javascript">navigator.battery || navigator.webkitBattery || navigator.mozBattery</code></pre>
                        <p>
                            <em class="fragment">Properties for charging, current level and discharge time</em>
                            <br>
                            <em class="fragment">Events when properties change</em>
                        </p>
                        <p class="fragment">Why do we care?</p>
                        <p>
                            <em class="fragment">Minimize the frequency of radio wakes</em>
                            <br>
                            <em class="fragment">Adjust colors to minimize battery drain</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>Network Information API<br><small>(that wasn't)</small></h2>
                        <p class='fragment'>Proposal for an API with bandwidth and metered properties</p>
                        <pre class='fragment'><code class="javascript">var i = document.getElementById('ex'), connection = document.connection;
if (connection.bandwidth > 2 && !connection.metered) {
  i.src = "/ex_hd.png";
} else {
  i.src = "/ex_ld.png";
}</code></pre>
                        <p class='fragment'>But this didn't come to pass...</p>
                    </section>
                    
                    <section>
                        <h2>Network Sampling</h2>
                        <p class='fragment'><strong>Navigation Timing API</strong>&nbsp; ( <strong>performanceTiming</strong> interface )</p>
                        <p class='fragment'><img src='img/navigation-timing-api.png' style='height:400px;'></p>
                    </section>
                    
                    <section>
                        <h2>More Performance Sampling</h2>
                        <p class='fragment'><strong>Resource Timing API</strong>&nbsp; ( <strong>performanceTiming</strong> interface )</p>
                        <pre class='fragment'><code class="javascript">window.performance.getEntriesByType("resource")[5]</code></pre>
                        <p class='fragment' style='margin-top:24px;'><strong>User Timing API</strong></p>
                        <pre class='fragment'><code>performance.now</code></pre>
                        <pre class='fragment'><span class="fragment">performance.mark("startTask1");</span>
someTaskToMeasure();
<span class='fragment'>performance.mark("endTask1");</span>
<span class='fragment'>var perfEntries = performance.getEntriesByType("mark");</pre>
                    </section>
                    
                    <section>
                        <h2>Storage Availability</h2>
                        <p>
                            <em class='fragment'>Web Storage</em><em class='fragment'>, App Cache</em><em class='fragment'>, FileSystem API</em><em class='fragment'> &amp; Indexed Database</em></em>
                        </p>
                        <p class='fragment'><strong>Quota Management API</strong></p>
                        <pre class="fragment">navigator.storageQuota.queryInfo(<span class="fragment">"temporary"</span>).then(<span class="fragment">function(storageInfo) {
  initializeCache(storageInfo.usage, storageInfo.quota - storageInfo.usage);
}</span>);</pre>
                        <pre class="fragment">
  navigator.storageQuota.queryInfo(<span class="fragment">"persistent"</span>)<span class="fragment">.then(function(storageInfo){
      <span class="fragment">var availableSpace = storageInfo.quota - storageInfo.usage;</span>
      <span class="fragment">if (availableSpace >= spaceNeeded)
        return storageInfo;</span>
      <span class="fragment">else
        return navigator.storageQuota.requestPersistentQuota(
                spaceNeeded + storageInfo.usage);</span>
    }
  )</span><span class="fragment">.then(<span class="fragment">function (storageInfo) {
    prepareForOfflineMode(storageInfo.quota - storageInfo.usage);
  }</span><span class="fragment">, errback</span>)</span></pre>
                    </section>
                    
                </section>
                
                <section>

                    <section>
                        <h2>Web Components</h2>
                    </section>
                    
                    <section>
                        <h2>The Original Vision for HTML</h2>
                        <p class='fragment'>Originally, just text and links</p>
                        <p class="fragment">Support added for images and media</p>
                        <p class="fragment">Becomes a publishing and marketing medium</p>
                        <p class='fragment'><strong>By the late 1990's, the web was no longer optional</strong></p>
                    </section>
                    
                    <section>
                        <h2>From Information to Interaction</h2>
                        <p class='fragment'><strong>DotCom era bore a new generation of web tech</strong></p>
                        <p>
                            <em class='fragment'>eCommerce</em>
                            <br><em class='fragment'>Social networks</em>
                            <br><em class='fragment'>Blogs, wikis and podcasts</em>
                            <br><em class='fragment'>Streaming services</em>
                        </p>
                        <p class='fragment'><strong>Boom turned to bust, but "Web 2.0" remained</strong></p>
                        <p>
                            <em class='fragment'>Rich Internet Applications</em>
                            <br><em class='fragment'>Web-oriented Architecture</em>
                            <br><em class='fragment'>Social Web</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>Keeping Up with the Changing Model</h2>
                        <p class="fragment"><strong>HTML suffers from its success</strong></p>
                        <p>
                            <em class='fragment'>Divitis</em>
                            <br>
                            <em class="fragment">XHTML, DHTML, ActiveX, Java</em>
                            <br>
                            <em class='fragment'>JavaScript Mega-Frameworks</em>
                            <br>
                            <em class='fragment'>Flash &amp; Silverlight</em>
                        </p>
                        <p class="fragment"><strong>HTML 5</strong></p>
                        <p>
                            <em class='fragment'>Structural semantics</em>
                            <br>
                            <em class='fragment'>Interactive features</em>
                        </p>
                        <p class='fragment'><strong>A larger feature set... but still a discrete one</span></strong></p>
                    </section>
                    
                    <section>
                        <h2>Beyond Discrete Semantics</h2>
                        <p class='fragment'><strong>Semantics should be</strong></p>
                        <p>
                            <em class='fragment'>Domain-applicable</em>
                            <br>
                            <em class='fragment'>Expressive</em>
                            <br>
                            <em class='fragment'>Encapsulated</em>
                            <br>
                            <em class='fragment'>Reusable</em>
                            <br>
                            <em class='fragment'>Composable</em>
                            <br>
                            <em class='fragment'>Extensible</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>Web Components</h2>
                        <p class='fragment'>
                            <strong>Custom Elements</strong>
                            <br><em>define new HTML tags</em>
                        </p>
                        <p class='fragment'>
                            <strong>HTML Templates</strong>
                            <br><em>inject dynamic content into static markup structures</em>
                        </p>
                        <p class='fragment'>
                            <strong>Shadow DOM</strong>
                            <br><em>scope markup and styles in a separate DOM tree</em>
                        </p>
                        <p class='fragment'>
                            <strong>HTML Imports</strong>
                            <br><em>import HTML documents into other HTML documents</em>
                        </p>
                    </section>
                    
                </section>
                
                <section>
                    
                    <section>
                        <h2>Custom Elements</h2>
                    </section>
                    
                    <section>
                        <h2>Basics</h2>
                        <p class="fragment">Register a custom element</p>
                        <pre class="fragment"><code>var XFoo = document.registerElement('x-foo');</code></pre>
                        <p class="fragment">Use within the DOM</p>
                        <pre class="fragment"><code>&lt;x-foo&gt;&lt;/x-foo&gt;</code></pre>
                        <p class="fragment">Instantiate the element</p>
                        <pre class="fragment"><code >document.body.appendChild(new XFoo());</code></pre>
                    </section>
                    
                    <section>
                        <h2>More About Registration</h2>
                        <pre class="fragment"><code class="javascript">var XFoo = document.registerElement('x-foo');</code></pre>
                        <pre class="fragment"><code class="javascript">var XFoo = document.registerElement('x-foo', { 
  prototype: Object.create(HTMLElement.prototype) 
});</code></pre>
                        <pre class="fragment"><code class="javascript">var XFooProto = Object.create(HTMLElement.prototype);

// ..

var XFoo = document.registerElement('x-foo', {
  prototype: XFooProto
});</code></pre>
                    </section>
                    
                    <section>
                        <h2>Extending an Element</h2>
                        <pre class='fragment'><code class='javascript'>var MegaButton = document.registerElement('mega-button', { 
  prototype: Object.create(HTMLButtonElement.prototype), 
  extends: 'button'
});</code></pre>
                        <p class='fragment'>Attributes, methods and callbacks inherited from &nbsp;<code>button</code></p>
                        <pre class='fragment'><code class='html'>&lt;button is="mega-button"&gt;</code></pre>
                        <pre class='fragment'><code class='javascript'>var megaButton = document.createElement('button', 'mega-button');</code></pre>
                        <pre class='fragment'><code class='css'>[is="mega-button"] { font-size: 2em; }</code></pre>
                    </section>
                    
                    <section>
                        <h2>For Convinience, Setters &amp; Getters</h2>
                        <pre class="fragment"><code>var XFooProto = Object.create(HTMLElement.prototype);
XFooProto.foo = function() { alert('foo() called'); };
XFooProto.bar = 5;
var XFoo = document.registerElement('x-foo', {
  prototype: XFooProto
});</code></pre>
                        <pre class="fragment"><code>var XFoo = document.registerElement('x-foo', { 
  prototype: Object.create(HTMLElement.prototype, { 
    foo: { 
      value: function() { alert('foo() called'); } 
    },
    bar: { 
      get: function() { return 5; } 
    }
  })
});
</code></pre>
                    </section>
                    
                    <section>
                        <h2>Custom Element Lifecycle</h2>
                        <p class="fragment"><strong>createdCallback</strong>
                            <br><em>when instance of element is created</em></p>
                        <p class="fragment"><strong>attachedCallback</strong>
                            <br><em>when an instance is inserted into the document</em></p>
                        <p class="fragment"><strong>detachedCallback</strong>
                            <br><em>when an instance is removed from the document</em></p>
                        <p class="fragment"><strong>attributeChangedCallback(attrName, oldVal, newVal)</strong>
                            <br><em>when an attribute is added, removed or updated</em></p>
                    </section>
                    
                </section>
                
                <section>
                    
                    <section>
                        <h2>Putting Custom Elements to Work</h2>
                    </section>
                    
                    <section>
                        <h2>A Motivating Example</h2>
                        <p class='fragment'><strong>Data collection @ CloudCompli</strong></p>
                        <p>
                            <em class="fragment">Develop software for environmental compliance</em>
                            <br>
                            <em class='fragment'>Workflows driven by inspections &amp; other data collection</em>
                            <br>
                            <em class='fragment'>Compliance isn't simple or accommodating</em>
                            <br>
                            <em class='fragment'>Need a simple definition language for complex forms</em>
                        </p>
                        <p class='fragment'><strong>We need more than HTML forms offer out-of-the-box</strong></p>
                    </section>
                    
                    <section>
                        <img src="img/cc-form.png" style="width:500px">
                    </section>
                    
                    <section>
                        <h2>Why Isn't HTML Enough?</h2>
                        <p class='fragment'>
                            <strong>HTML forms are flat</strong>
                            <br><em>Hard to represent sets, sub-structures &amp; complex data types</em>
                        </p>
                        <p class='fragment'>
                            <strong>HTML forms are missing controls we need</strong>
                            <br><em>Signatures, geocoding, graphical, etc.</em>
                        </p>
                        <p class='fragment'>
                            <strong>HTML forms are weak on behavioral definitions</strong>
                            <br><em>Conditional applicability, multi-group sets, etc.</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>A Comparison</h2>
                        <p class="fragment">
                            <strong>The Old Way</strong>
                            <br><em class="fragment">Most forms over 1k LOC</em>
                            <br><em class="fragment">Largest form over 3k LOC</em>
                            <br><em class="fragment">Limited reusability</em>
                            <br><em class="fragment">Mid-level engineer required</em>
                        </p>
                        <p class="fragment">
                            <strong>The New Way</strong>
                            <br><em class="fragment">Largest form less than 1k LOC</em>
                            <br><em class="fragment">Control behaviors completely reusable</em>
                            <br><em class="fragment">"Intern-ready"</em>
                        </p>
                    </section>
                    
                </section>
                
                <section>
                    
                    <section>
                        <h2>Putting Custom Elements to Work</h2>
                    </section>
                    
                    <section>
                        <h2>Latitude Input: Custom Callback</h2>
                        <pre class="fragment"><code>&lt;input is="type-lat" name="latitude"&gt;</code></pre>
                        <pre class="fragment"><code>var initializeInputTypeLat = function(){
  var self = this;
  self.type = 'number';
  self.min = -90;
  self.max = 90;
  self.step = 'any';
  navigator.geolocation.getCurrentPosition(function(position){
    self.value = position.coords.latitude;
  });
}</code></pre>
                        <pre class="fragment"><code>document.registerElement('type-lat', {
  extends: 'input',
  prototype: Object.create(HTMLInputElement.prototype, {
    attachedCallback: {
      value: initializeInputTypeLat
    }
  })
});</code></pre>
                    </section>
                    
                    <section>
                        <h2>Nested Data</h2>
                        <pre class="fragment"><code class="xml">&lt;form is="hierarchical-form" action="/report" method="POST"&gt;
    &lt;input type="text" name="title"&gt;
    &lt;fieldset is="control-group" data-name="location"&gt;
        &lt;legend&gt;Location&lt;/legend&gt;
        &lt;input is="type-lat" name="latitude"&gt;
        &lt;input is="type-lng" name="longitude"&gt;
    &lt;/fieldset&gt;
    &lt;input type="submit"&gt;
&lt;/form&gt;</code></pre>
                        <pre class="fragment"><code>{
    "title": "Example",
    "location": {
        "latitude": "34.068077", 
        "longitude": "-118.442542"
    }
}</code></pre>
                    </section>
                    
                    <section>
                        <h2>Control Group</h2>
                        <pre class="fragment"><code>&lt;fieldset is="control-group" data-name="location"&gt;
    &lt;legend&gt;Location&lt;/legend&gt;
    &lt;input is="type-lat" name="latitude"&gt;
    &lt;input is="type-lng" name="longitude"&gt;
&lt;/fieldset&gt;</code></pre>
                        <pre class="fragment"><code>group.value == {
    "latitude": "34.068077", 
    "longitude": "-118.442542"
}</code></pre>
                        <p class="fragment">
                            <strong><code>control-group</code> as a meta-field</strong>
                            <br><em class="fragment">It's value should be an object of sub-fields</em>
                            <br><em class="fragment">It's name should be used for form data or in a parent group</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>Control Group: Name</h2>
                        <p class="fragment"><code>data-name</code> attribute for fieldset name</p>
                        <pre class="fragment"><code>document.registerElement('control-group', {
  extends: 'fieldset',
  prototype: Object.create(HTMLFieldSetElement.prototype, {
    name: {
      get: function(){
        return $(this).attr('data-name');
      },
      set: function(value){
        $(this).attr('data-name', value);
      }
    },
    /* .. */
  })
});</code></pre>
                    </section>
                    
                    <section>
                        <h2>Control Group: Value Getter</h2>
                        <pre class="fragment"><code>document.registerElement('control-group', {
  extends: 'fieldset',
  prototype: Object.create(HTMLFieldSetElement.prototype, {
    /* .. */
    value: {
      get: getValueForControlGroup
    }
  })
});</code></pre>
                            <pre class="fragment"><code>var getValueForControlGroup = function(){
    var values = {}, name;
    $(this).find(processableSelector)
           .not($(this).find(exclusionSelector))
           .each(function(){
        if(name = $(this).attr('name') && this.value !== undefined){
            values[name] = this.value;
        }
    });
    return values;
}</code></pre>
                    </section>
                    
                    <section>
                        <h2>Control Group: Value Setter</h2>
                        <pre class="fragment"><code>document.registerElement('control-group', {
  extends: 'fieldset',
  prototype: Object.create(HTMLFieldSetElement.prototype, {
    /* .. */
    value: {
      get: getValueForControlGroup,
      set: setValueForControlGroup
    }
  })
});</code></pre>
                        <pre class="fragment"><code>var setValueForControlGroup = function(){
    $(this).find(processableSelector)
       .not($(this).find(exclusionSelector))
       .each(function(){
            var name = this.name;
            if(value[name])
                this.value = value[name]
    });
}
</code></pre>
                    </section>
                    
                    <section>
                        <h2>Form: Values</h2>
                        <pre class="fragment"><code>form.value == {
    "title": "Example",
    "location": {
        "latitude": "34.068077", 
        "longitude": "-118.442542"
}   }</code></pre>
                        <pre class="fragment"><code>form.value = {
    "some-group": {
        "some-field": "some value"
}   }</code></pre>
                        <pre class="fragment"><code>document.registerElement('hierarchical-form', {
    extends: 'form',
    prototype: Object.create(HTMLFormElement.prototype, {
        value: {
            get: getValueForControlGroup,
            set: setValueForControlGroup
        }
    })
});</code></pre>
                    </section>
                    
                    <section>
                        <h2>Form: Submission</h2>
                        <pre class='fragment'><code>&lt;form is="hierarchical-form" action="server/submit.php" method="POST"
      data-success="server/success.php" data-error="server/error.php"&gt;</code></pre>
                        <pre class="fragment"><code>document.registerElement('hierarchical-form', {
    extends: 'form',
    prototype: Object.create(HTMLFormElement.prototype, {
        attachedCallback: {
            value: function(){ overrideFormSubmitHandler(this); }
}   })  });</code></pre>
                        <pre class="fragment"><code>var overrideFormSubmitHandler = function(form){
    $(form).submit(function(e){ e.preventDefault();
        $.ajax({ url: $(form).attr('action'),
                 method: $(form).attr('method'),
                 data: JSON.stringify(form.value),
                 contentType: 'application/json; charset=utf-8',
                 success: function(){ 
                     window.location = $(form).attr('data-success'); },
                 error: function(){ 
                     window.location = $(form).attr('data-error'); }
})  })  };</code></pre>
                    </section>
                    
                </section>
                
                <section>
                    
                    <section>
                        <h2>Getting Organized</h2>
                    </section>
                    
                    <section>
                        <h2>Quickly Becoming a Mess</h2>
                        <pre class="fragment"><code>(function(){
    
    var processableFields = [
            'input', 
            'textarea', 
            'select', 
            'fieldset[is="control-group"]'
        ],
        processableSelector = processableFields.join(', '),
        exclusionSelector = processableFields
            .map(function(f){ 
                return 'fieldset[is="control-group"] '+f; 
            }).join(', ');
    
    var HierarchicalGroupValueProperties = {
        value: {
            get: function(){
                
                var values = {}

                $(this).find(processableSelector)
                       .not($(this).find(exclusionSelector))
                       .each(function(){
                    var name = this.name;
                    if(name && this.value !== undefined){
                        values[name] = this.value;
                    }
                });

                return values;
            },
            set: function(value){
                
                $(this).find(processableSelector)
                       .not($(this).find(exclusionSelector))
                       .each(function(){
                    var name = this.name;
                    if(value[name])
                        this.value = value[name]
                });
                
            }
        }
    }
    
    window.HierarchicalFormElement = document.registerElement(
            'hierarchical-form', {
        extends: 'form',
        prototype: Object.create(HTMLFormElement.prototype, 
                $.extend({}, HierarchicalGroupValueProperties, {
            attachedCallback: {
                value: function(){
                    var form = this;
                    $(this).submit(function(e){
                        e.preventDefault();
                        $.ajax({
                            url: $(form).attr('action') 
                                    ? $(form).attr('action') 
                                    : '#',
                            method: $(form).attr('method') 
                                    ? $(form).attr('method') 
                                    : 'GET',
                            data: JSON.stringify(form.value),
                            contentType: 
                                'application/json; charset=utf-8',
                            success: function(){ 
                                if($(form).attr('data-success'))
                                    window.location = 
                                        $(form).attr('data-success'); 
                            },
                            error: function(){ 
                                console.log(arguments)
                                if($(form).attr('data-error'))
                                    window.location = 
                                        $(form).attr('data-error'); 
                            }
                        })
                    })
                }
            }
        }))
    });

    window.ControlGroupElement = document.registerElement(
            'control-group', {
        extends: 'fieldset',
        prototype: Object.create(HTMLFieldSetElement.prototype, 
                $.extend({}, HierarchicalGroupValueProperties, {
            name: {
                get: function(){
                    return $(this).attr('data-name');
                },
                set: function(value){
                    $(this).attr('data-name', value);
                }
            }
        }))
    });

    window.InputTypeLatElement = document.registerElement(
            'type-lat', {
        extends: 'input',
        prototype: Object.create(HTMLInputElement.prototype, {
            attachedCallback: {
                value: function(){
                    var self = this;
                    self.type = 'number';
                    self.min = -90;
                    self.max = 90;
                    self.step = 'any';
                    navigator.geolocation.getCurrentPosition(
                        function(position){
                            self.value = position.coords.latitude;
                        });
                }
            }
        })
    });

    window.InputTypeLngElement = document.registerElement(
            'type-lng', {
        extends: 'input',
        prototype: Object.create(HTMLInputElement.prototype, {
            attachedCallback: {
                value: function(){
                    var self = this;
                    self.type = 'number';
                    self.min = -180;
                    self.max = 180;
                    self.step = 'any';
                    navigator.geolocation.getCurrentPosition(
                        function(position){
                            self.value = position.coords.longitude;
                        });
                }
            }
        })
    });
    
})()</code></pre>
                    </section>
                    
                    <section>
                        <h2>Partial Loading</h2>
                        <p class='fragment'><strong>Great for resources</strong></p>
                        <p><em>
                            <code class='fragment'>&lt;script src&gt;</code>
                            <br>
                            <code class='fragment'>&lt;link rel="stylesheet" href&gt;</code>
                            <br>
                            <span class='fragment'><code>&lt;img&gt;</code> , <code>&lt;video&gt;</code> &nbsp; and &nbsp;<code>&lt;img&gt;</code></span>
                            <br>
                            <span class='fragment'><code>&lt;embed&gt;</code> &nbsp; and &nbsp;<code>&lt;object&gt;</code></span>
                        </em></p>
                        <p class='fragment'><strong>But historically bad for HTML</strong></p>
                        <p>
                            <em class="fragment">AJAX</em>
                            <br>
                            <em class="fragment"><code>&lt;iframe&gt;</code></em>
                            <br>
                            <em class="fragment">Hacks (overloading <code>&lt;script&gt;</code>, hiding in comments, etc.)</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>HTML Imports</h2>
                        <pre class="fragment"><code>&lt;link rel='import' href='elements/fieldset_control-group.html'&gt;</code></pre>
                        <pre class="fragment"><code>&lt;script type='text/javascript' src="../libraries/jquery.js"&gt;&lt;/script&gt;
&lt;script type='text/javascript'&gt;
document.registerElement('control-group', {
    /* .. */
});
&lt;/script&gt;</code></pre>
                        <p class="fragment">Support for recursion</p>
                        <pre class="fragment"><code>&lt;link rel='import' href='elements.html'&gt;</code></pre>
                        <pre class="fragment"><code>&lt;link rel='import' href='elements/form_hierarchical-form.html'&gt;
&lt;link rel='import' href='elements/fieldset_control-group.html'&gt;
&lt;link rel='import' href='elements/input_type-lat.html'&gt;
&lt;link rel='import' href='elements/input_type-lng.html'&gt;</code></pre>
                    </section>
                    
                    <section>
                        <h2>Namespace Chaos</h2>
                        <p class="fragment">Multiple elements may need the same routines</p>
                        <pre class="fragment"><code>var HierarchicalGroupValue = (function(){

    var processableFields = [
            'input', 
            'textarea', 
            'select', 
            'fieldset[is="control-group"]'
        ],
        processableSelector = processableFields.join(', '),
        exclusionSelector = processableFields
            .map(function(f){ 
                return 'fieldset[is="control-group"] '+f; 
            }).join(', ');

    return {
        get: function(){

            var values = {}

            $(this).find(processableSelector)
                   .not($(this).find(exclusionSelector))
                   .each(function(){
                var name = this.name;
                if(name && this.value !== undefined){
                    values[name] = this.value;
                }
            });

            return values;
        },
        set: function(){

            $(this).find(processableSelector)
                   .not($(this).find(exclusionSelector))
                   .each(function(){
                var name = this.name;
                if(value[name])
                    this.value = value[name]
            });

        }
    };

})();</code></pre>
                    </section>
                    
                    <section>
                        <h2>ES6 Modules</h2>
                        <pre class="fragment"><code style='overflow:hidden;'>var processableFields = ['input', 'textarea', 'select', 'fieldset[is="control-group"]'],
    processableSelector = processableFields.join(', '),
    exclusionSelector = processableFields.map(function(f){ 
            return 'fieldset[is="control-group"] '+f; 
        }).join(', ');
export function get(){ /* .. */ };
export function set(value){ /* .. */ };</code></pre>
                        <pre class="fragment"><code>import { get } from 'hierarchicalGroupValue';
get.call(element)</code></pre>
                        <pre class="fragment"><code>import * from 'hierarchicalGroupValue';
hierarchicalGroupValue.get.call(element)</code></pre>
                        <pre class="fragment"><code>import * from 'hierarchicalGroupValue';
document.registerElement('control-group', {
    extends: 'form',
    prototype: Object.create(HTMLFieldSetElement.prototype, {
        value: hierarchicalGroupValue,
        attachedCallback: { /* .. */ }
})  });</code></pre>
                    </section>
                    
                    <section>
                        <h2>ES6 Module Loader</h2>
                        <pre class="fragment"><code>System.import('helpers/hierarchical-group-value').then(function(hgv){
    document.registerElement('hierarchical-form', {
        extends: 'form',
        prototype: Object.create(HTMLFormElement.prototype, {
            value: hgv,
            /* .. */
        })
    });
});
</code></pre>
                    </section>
                    
                    <section>
                        <h2>Multiple ES6 Modules</h2>
                        <pre class="fragment"><code>Promise.all([
    'helpers/hierarchical-group-value', 'helpers/data-name'
].map(function(m){ return System.import(m) })).then(function(m) {
    var hierarchicalGroupValue = m[0],
        dataName = m[1];
    document.registerElement('control-group', {
        extends: 'fieldset',
        prototype: Object.create(HTMLFieldSetElement.prototype, {
            value: hierarchicalGroupValue,
            name: dataName
        })
    });
});</code></pre>
                    </section>
                    
                </section>
                
                <section>
                    
                    <section>
                        <h2>Templates &amp; Shadow DOM</h2>
                    </section>
                    
                    <section>
                        <h2>Multiple Group Control</h2>
                        <p class='fragment'>Multiple sets of the same group of controls
                            <br><span class='fragment'>and the ability to add more sets</span></p>
                        <pre class='fragment'><code class='xml'>&lt;fieldset is='multi-group-control' data-name='issues'&gt;
    &lt;legend&gt;Issues&lt;/legend&gt;
    &lt;fieldset is="control-group"&gt;
        &lt;input type='text' name='identifier'&gt;
        &lt;textarea name='description'&gt;&lt;/textarea&gt;
    &lt;/fieldset&gt;
    &lt;fieldset is="control-group"&gt;
        &lt;input type='text' name='identifier'&gt;
        &lt;textarea name='description'&gt;&lt;/textarea&gt;
    &lt;/fieldset&gt;
    &lt;!-- .. --&gt;
    &lt;button&gt;+&lt;/button&gt;
&lt;/fieldset&gt;</code></pre>
                    </section>
                    
                    <section>
                        <h2>Scaffolding the Control</h2>
                        <p class='fragment'>Let's implement a Web Component for this where...</p>
                        <p class='fragment'><em>you define a template for the group</em></p>
                        <pre class='fragment'><code class='xml'>&lt;fieldset is='multi-group-control' data-name='issues'&gt;
    &lt;legend&gt;Issues&lt;/legend&gt;
    &lt;template&gt;
        &lt;input type='text' name='identifier'&gt;
        &lt;textarea name='description'&gt;&lt;/textarea&gt;
    &lt;/template&gt;
&lt;/fieldset&gt;</code></pre>
                        <p class='fragment'><em>the value is an array of the group values</em></p>
                        <pre class='fragment'><code class='json'>[
    { "name": "..", "description": ".." },
    { "name": "..", "description": ".." }
]</code></pre>
                    </section>
                    
                    <section>
                        <h2>Template Element</h2>
                        <p class="fragment">
                            <strong>Inert until activated</strong>
                            <br>
                            <em class="fragment">Markup is hidden and doesn't render until activated</em>
                        </p>
                        <p class="fragment">
                            <strong>No side-effects</strong>
                            <br>
                            <em class="fragment">Scripts don't run and media isn't retrieved until activated</em>
                        </p>
                        <p class="fragment">
                            <strong>Not in DOM tree</strong>
                            <br>
                            <em class="fragment">Not selectable by usual DOM methods</em>
                            <br>
                            <em class='fragment'>May be placed anywhere in head, body or frameset</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>Using Template for Delayed Activation</h2>
                        <pre class='fragment'><code class='html'>&lt;button onclick="example()"&gt;Use me&lt;/button&gt;
&lt;div id="container"&gt;&lt;/div&gt;</code></pre>
                        <pre class='fragment'><code class='html'>&lt;template&gt; 
  &lt;div&gt;Template used: &lt;span&gt;0&lt;/span&gt;&lt;/div&gt; 
  &lt;script&gt;alert('Foobar!')&lt;/script&gt; 
&lt;/template&gt;
</code></pre>
                        <pre class='fragment'><code class='javascript'>function example() { 
  var content = document.querySelector('template').content,
      span = content.querySelector('span');

  span.textContent = parseInt(span.textContent) + 1;

  document.querySelector('#container')
          .appendChild(document.importNode(content, true));
}</code></pre>
                    </section>
                    
                    <section>
                        <h2>Generating the Meta-Control</h2>
                        <pre class='fragment'><code class='xml'>&lt;fieldset is='multi-group-control' data-name='issues'&gt;
    &lt;legend&gt;Issues&lt;/legend&gt;
    &lt;template&gt;
        &lt;input type='text' name='identifier'&gt;
        &lt;textarea name='description'&gt;&lt;/textarea&gt;
    &lt;/template&gt;
&lt;/fieldset&gt;</code></pre>
                        <pre class='fragment'><code>attachedCallback: {
    value: function(){
        var control = this;
        this.template = $(this).children('template').get()[0];
        this.container = document.createElement('div');
        $(this).append(this.container);
        this.$button = $('&lt;button&gt;').attr('type', 'button')
                            .text('+')
                            .click(function(){
                                control.addControlGroup();
                             })
                            .appendTo(this);
    }
}</code></pre>
                    </section>
                    
                    <section>
                        <h2>Generating a Control Group</h2>
                        <pre class='fragment'><code class='xml'>&lt;fieldset is='multi-group-control' data-name='issues'&gt;
    &lt;legend&gt;Issues&lt;/legend&gt;
    &lt;template&gt;
        &lt;input type='text' name='identifier'&gt;
        &lt;textarea name='description'&gt;&lt;/textarea&gt;
    &lt;/template&gt;
&lt;/fieldset&gt;</code></pre>
                        <pre class='fragment'><code>addControlGroup: {
    value: function(value){
        var clone = document.importNode(this.template.content, true),
            $newGroup = $('&lt;fieldset is="control-group"&gt;');

        $newGroup.append(clone);
        $(this.container).append($newGroup);

        if(value !== undefined)
            $newGroup.get()[0].value = value;
    }
}</code></pre>
                    </section>
                    
                    <section>
                        <h2>The Meta-Group's Getter &amp; Setter</h2>
                        <pre class='fragment'><code class='json'>[
    { "name": "..", "description": ".." },
    { "name": "..", "description": ".." }
]</code></pre>
                        <pre class='fragment'><code>get: function(){
    var groups = [];
    $(this.container).children().each(function(){
        groups.push(this.value);
    });
    return groups;
}</code></pre>
                        <pre class='fragment'><code>set: function(values){
    values.forEach(function(value){
        this.addControlGroup(value);
    }, this);
}</code></pre>
                    </section>
                    
                    <section>
                        <h2>Leaky Implementation Details</h2>
                        <p class='fragment'>What about namespace clashes?</p>
                        <p><em class='fragment'>If we use a class in our widget, external definitions might leak in</em></p>
                        <p class='fragment'>When building and using widgets, we want to...</p>
                        <p>
                            <em class='fragment'>Encapsulate implementation details</em>
                            <br>
                            <em class='fragment'>Isolate from exterior styles and behaviors</em>
                        </p>
                        <p class='fragment'><strong>We need to isolate the widget's DOM tree</strong></p>
                    </section>
                    
                    <section>
                        <h2>Shadow DOM</h2>
                        <pre class='fragment'><code>this.container = document.createElement('div');

$(this).append(this.container);</code></pre>
                        <pre class='fragment'><code>var shadowContainer = document.createElement('div'),
    shadow = shadowContainer.createShadowRoot();

this.container = shadow;

$(this).append(shadowContainer);
</code></pre>
                        <pre class='fragment'><code>&lt;div&gt;
    #shadow-root
        &lt;fieldset is="control-group"&gt;&lt;!-- .. --&gt;&lt;/fieldset&gt;
        &lt;!-- .. --&gt;
&lt;/div&gt;</code></pre>
                    </section>
                    
                    <section>
                        <h2>Styling Shadow DOM</h2>
                        <p class="fragment">Target the host of the shadow</p>
                        <pre class="fragment"><code class="css">:host(:hover) { /* .. */ }
</code></pre>
                        <p class="fragment">Target a descendant of the host of the shadow</p>
                        <pre class="fragment"><code class="css">:host-context(.wrapper) { /* .. */ }
</code></pre>
                        <p class="fragment">Target elements within the shadow context</p>
                        <pre class="fragment"><code>[is="multi-group-control"] > ::shadow > [is="control-group"] {/* .. */}</code></pre>
                    </section>
                    
                    <section>
                        <h2>Use with Caution!</h2>
                        <p class='fragment'>
                            <strong>Shadow DOM & template polyfills have to wrap...</strong>
                            <br><em class="fragment">Document, Window, Element, XMLHttpRequest</em><em class="fragment">, Node, NodeList, DOMTokenList, FormData, WebGLRenderingContext, Selection</em><em class="fragment">, and another 25 or so elements...</em>
                        </p>
                        <p class='fragment'>
                            <strong>Oh, and functions like...</strong>
                            <br><em class="fragment">createElement, createEvent, getElementById, getSelection, querySelector, querySelectorAll</em><em class="fragment">, and another 15 or so core ones...</em>
                        </p>
                        <p class='fragment'>
                            We love Web Components at CloudCompli, but...
                            <br><strong>we do not yet use template and Shadow DOM</strong>
                        </p>
                    </section>
                    
                </section>
                
                <section>
                    
                    <section>
                        <h2>Experiences from the Real World</h2>
                    </section>
                    
                    <section>
                        <h2>This Stuff Isn't Easy</h2>
                        <p class='fragment'>
                            <strong>3 rewrites and 100 hours on our form components</strong>
                            <br><em class='fragment'>But estimated savings producing forms over 10x that</em>
                        </p>
                        <p class='fragment'>
                            <strong>Edge cases and race conditions</strong>
                            <br><em class='fragment'>Event model and asynchronous loading get messy fast</em>
                        </p>
                        <p class="fragment">
                            <strong>Performance can be tough</strong>
                            <br><em class="fragment">You're in the DOM node initialization process</em>
                        </p>
                        <p class='fragment'>
                            <strong>Browser bugs/inconsistencies and limited debugging</strong>
                            <br><em class='fragment'>The browsers aren't doing this all right yet either</em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>Browser Support, Polyfills and Failings</h2>
                        <p class='fragment'>
                            <strong>You are on the bleeding edge</strong>
                            <br><em class='fragment'>But browsers are fixing bugs and adding features</em>
                        </p>
                        <p class='fragment'>
                            <strong>Polyfills do pretty good with most of this</strong>
                            <br><em class='fragment'>But pieces of it are definitely not for the feint of heart</em>
                        </p>
                        <p class='fragment'>
                            <strong>Web Components Polyfill</strong>
                            <br><em class='fragment'><a href='https://github.com/WebComponents/webcomponentsjs' target='_blank'>github.com/WebComponents/webcomponentsjs</a></em>
                        </p>
                        <p class='fragment'>
                            <strong>ES6 Modules</strong>
                            <br><em class='fragment'><a href='https://github.com/ModuleLoader/es6-module-loader' target='_blank'>github.com/ModuleLoader/es6-module-loader</a></em>
                            <br><em class='fragment'><a href='https://github.com/google/traceur-compiler' target='_blank'>github.com/google/traceur-compiler</a></em>
                        </p>
                    </section>
                    
                    <section>
                        <h2>Great Promise for the Future</h2>
                        <p class='fragment'>
                            <strong>We've only scratched the surface</strong>
                            <br><em class='fragment'>So many more features and yet unforeseen outcomes</em>
                        </p>
                        <p class='fragment'>
                            <strong>Makes HTML future-proof</strong>
                            <br><em class='fragment'>Allows us to define our own domain-specific elements</em>
                        </p>
                        <p class='fragment'>
                            <strong>Start using Web Components today</strong>
                            <br><em class='fragment'><a href='http://webcomponents.org/' target='_blank'>webcomponents.org</a></em>
                            <br><em class='fragment'><a href='https://customelements.io/' target='_blank'>customelements.io</a></em>
                            <br><em class='fragment'><a href='http://component.kitchen/' target='_blank'>component.kitchen</a></em>
                        </p>
                    </section>
                    
                </section>
                
                <section>
                    
                    <section>
                        <h2>Some Examples</h2>
                        <p class="fragment"><strong><a href="https://github.com/ebollens/p-building-modern-web/tree/gh-pages/ex" target="_blank">github.com/ebollens/<br>p-building-modern-web/tree/gh-pages/ex</a></strong></p>
                        <p class="fragment"><strong>Responsive Video Gallery</strong>
                            <br><em>Responsive Layouts, Custom Elements, HTML Imports</em></p>
                        <p class="fragment"><strong>Hierarchical Forms</strong>
                            <br><em>Custom Elements, HTML Imports, Templates, Shadow DOM</em></p>
                    </section>
                    
                </section>
                
                <section>
					<h1>Thank You</h1>
                    <h2>Any Questions?</h2>
					<p>
						<small>Eric Bollens / <a href="mailto:eric@eb.io">eric@eb.io</a> / <a href="http://github.com/ebollens">ebollens [GitHub]</a> / <a href="http://twitter.com/ericbollens">@ericbollens [Twitter]</a></small>
					</p>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
